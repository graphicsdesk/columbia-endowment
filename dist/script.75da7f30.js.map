{"version":3,"sources":["../node_modules/enter-view/enter-view.min.js","../node_modules/text-balancer/text-balancer.js","../config.json","scripts/page.js","script.js"],"names":["module","exports","isOnSpectatorPage","window","location","host","isOnContributorPage","pathname","indexOf","document","querySelectorAll","forEach","link","disabled","styleSheet","createElement","type","innerText","head","appendChild","SECTION_MAIN_SELECTOR","ARTICLE_SELECTOR","hoistArticle","sectionMain","querySelector","article","parentNode","replaceChild","suspectParagraph","firstElementChild","children","some","el","includes","tagName","style","margin","start","ready","timestamp","body","requestAnimationFrame","console","log","onload","navbar","getElementById","USE_COVER_HED","USE_EYE_NAV","selector","offset","enter","classList","remove","exit","add","hamburgerTrigger","toggle","textBalancer","balanceText"],"mappings":"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,SAAS,GAAGF,KAAZ,GAAoB,IAAxB,EAA8B;AFehC,AEdI;AFeJ,AEdIlC,IAAAA,MAAM,CAACsC,qBAAP,CAA6BH,KAA7B;AFeJ,AEdG,GAHD,MAGO;AFeT,AEdI;AFeJ,AEdII,IAAAA,OAAO,CAACC,GAAR,CACE,mCACAvB,qBADA,GAEA,8BAHF;AFeJ,AEVIjB,IAAAA,MAAM,CAACyC,MAAP,GAAgBtB,YAAhB;AFWJ,AEVG;AFWH,AEVC,EAED;AFSA;AACA;AACA,AEVA,IAAIpB,iBAAJ,EACEC,MAAM,CAACsC,qBAAP,CAA6BH,KAA7B;AFUF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"script.75da7f30.js","sourceRoot":"../src","sourcesContent":["\"use strict\";!function(e){\"function\"==typeof define&&define.amd?define(e):\"undefined\"!=typeof module&&module.exports?module.exports=e():window.enterView=e.call(this)}(function(){var e=function(e){function n(){E=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)}}function t(){if(y&&\"number\"==typeof y){var e=Math.min(Math.max(0,y),1);return F-e*F}return F}function o(){var e=document.documentElement.clientHeight,n=window.innerHeight||0;F=Math.max(e,n)}function r(){L=!1;var e=t();M=M.filter(function(n){var t=n.getBoundingClientRect(),o=t.top,r=t.bottom,i=t.height,s=o<e,u=r<e;if(s&&!n.__ev_entered){if(m(n),n.__ev_progress=0,h(n,n.__ev_progress),q)return!1}else!s&&n.__ev_entered&&(n.__ev_progress=0,h(n,n.__ev_progress),g(n));if(s&&!u){var d=(e-o)/i;n.__ev_progress=Math.min(1,Math.max(0,d)),h(n,n.__ev_progress)}return s&&u&&1!==n.__ev_progress&&(n.__ev_progress=1,h(n,n.__ev_progress)),n.__ev_entered=s,!0}),M.length||window.removeEventListener(\"scroll\",i,!0)}function i(){L||(L=!0,E(r))}function s(){o(),r()}function u(){o(),r()}function d(e){for(var n=e.length,t=[],o=0;o<n;o+=1)t.push(e[o]);return t}function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return\"string\"==typeof e?d(n.querySelectorAll(e)):e instanceof NodeList?d(e):e instanceof Array?e:void 0}function c(){M=f(v)}function a(){window.addEventListener(\"resize\",s,!0),window.addEventListener(\"scroll\",i,!0),window.addEventListener(\"load\",u,!0),s()}function _(){return v?(c(),M&&M.length?(n(),a(),void r()):(console.error(\"no selector elements found\"),!1)):(console.error(\"must pass a selector\"),!1)}var v=e.selector,l=e.enter,m=void 0===l?function(){}:l,w=e.exit,g=void 0===w?function(){}:w,p=e.progress,h=void 0===p?function(){}:p,x=e.offset,y=void 0===x?0:x,A=e.once,q=void 0!==A&&A,E=null,L=!1,M=[],F=0;_()};return e});","var candidates = [];\n\n// pass in a string of selectors to be balanced.\n// if you didnt specify any, thats ok! We'll just\n// balance anything with the balance-text class\nvar textBalancer = function (selectors) {\n\n    if (!selectors) {\n        candidates = document.querySelectorAll('.balance-text');\n    } else {\n        createSelectors(selectors);\n    }\n\n    balanceText();\n\n    var rebalanceText = debounce(function() {\n        balanceText();\n    }, 100);\n\n    window.addEventListener('resize', rebalanceText);\n}\n\n// this populates our candidates array with dom objects\n// that need to be balanced\nvar createSelectors = function(selectors) {\n    selectorArray = selectors.split(',');\n    for (var i = 0; i < selectorArray.length; i += 1) {\n        var currentSelectorElements = document.querySelectorAll(selectorArray[i].trim());\n\n        for (var j = 0; j < currentSelectorElements.length; j += 1) {\n            var currentSelectorElement = currentSelectorElements[j];\n            candidates.push(currentSelectorElement);\n        }\n    }\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nvar debounce = function (func, wait, immediate) {\n    var timeout;\n    return function() {\n        var context = this, args = arguments;\n        var later = function() {\n            timeout = null;\n            if (!immediate) func.apply(context, args);\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n    };\n};\n\n\n// HELPER FUNCTION -- initializes recursive binary search\nvar balanceText = function () {\n    var element;\n    var i;\n\n    for (i = 0; i < candidates.length; i += 1) {\n        element = candidates[i];\n\n        if (textElementIsMultipleLines(element)) {\n            element.style.maxWidth = '';\n            squeezeContainer(element, element.clientHeight, 0, element.clientWidth);\n        }\n\n    }\n\n}\n\n// Make the element as narrow as possible while maintaining its current height (number of lines). Binary search.\nvar squeezeContainer = function (element, originalHeight, bottomRange, topRange) {\n    var mid;\n    if (bottomRange >= topRange) {\n        element.style.maxWidth = topRange + 'px';\n        return;\n    }\n    mid = (bottomRange + topRange) / 2;\n    element.style.maxWidth = mid + 'px';\n\n    if (element.clientHeight > originalHeight) {\n        // we've squoze too far and element has spilled onto an additional line; recurse on wider range\n        squeezeContainer(element, originalHeight, mid+1, topRange);\n    } else {\n        // element has not wrapped to another line; keep squeezing!\n        squeezeContainer(element, originalHeight, bottomRange+1, mid);\n    }\n}\n\n// function to see if a headline is multiple lines\n// we only want to break if the headline is multiple lines\n//\n// We achieve this by turning the first word into a span\n// and then we compare the height of that span to the height\n// of the entire headline. If the headline is bigger than the\n// span by 10px we balance the headline.\nvar textElementIsMultipleLines = function (element) {\n    var firstWordHeight;\n    var elementHeight;\n    var HEIGHT_OFFSET;\n    var elementWords;\n    var firstWord;\n    var ORIGINAL_ELEMENT_TEXT;\n\n    ORIGINAL_ELEMENT_TEXT = element.innerHTML;\n\n    // usually there is around a 5px discrepency between\n    // the first word and the height of the whole headline\n    // so subtract the height of the headline by 10 px and\n    // we should be good\n    HEIGHT_OFFSET = 10;\n\n    // get all the words in the headline as\n    // an array -- will include punctuation\n    //\n    // this is used to put the headline back together\n    elementWords = element.innerHTML.split(' ');\n\n    // make span for first word and give it an id\n    // so we can access it in le dom\n    firstWord = document.createElement('span');\n    firstWord.id = 'element-first-word';\n    firstWord.innerHTML = elementWords[0];\n\n    // this is the entire headline\n    // as an array except for first word\n    //\n    // we will append it to the headline after the span\n    elementWords = elementWords.slice(1);\n\n    // empty the headline and append the span to it\n    element.innerHTML = '';\n    element.appendChild(firstWord);\n\n    // add the rest of the element back to it\n    element.innerHTML += ' ' + elementWords.join(' ');\n\n    // update the first word variable in the dom\n    firstWord = document.getElementById('element-first-word');\n\n    firstWordHeight = firstWord.offsetHeight;\n    elementHeight = element.offsetHeight;\n    // restore the original element text\n    element.innerHTML = ORIGINAL_ELEMENT_TEXT;\n\n    // compare the height of the element and the height of the first word\n    return elementHeight - HEIGHT_OFFSET > firstWordHeight;\n\n} // end headlineIsMultipleLines\n\nexports.balanceText = textBalancer;","module.exports = {\n  \"USE_EYE_NAV\": false,\n  \"USE_COVER_HED\": false,\n  \"DOC_URL\": \"https://docs.google.com/document/d/1HVTqhn8cpZbsVQR1WuzMHqt4pQSIIroveWwUVrA_6OI/edit\"\n};","/* Scripts that should be on every Spectate page */\n\nconst isOnSpectatorPage = window.location.host === 'www.columbiaspectator.com';\nconst isOnContributorPage = isOnSpectatorPage &&\n  window.location.pathname.indexOf('/contributors') === 0;\n\n/**\n * Disable stylesheets on contributor page. Stylesheets are included in the\n * server-side render and styles in files like news-ellipsis.scss\n * still override the site.\n */\n\nif (isOnContributorPage) {\n  // Disable stylesheets\n  document.querySelectorAll('.story-summary > .twolines > link').forEach(link => link.disabled = true);\n  // Add styles to hide content preview\n  const styleSheet = document.createElement('style');\n  styleSheet.type = 'text/css';\n  styleSheet.innerText = '.story-summary > .twolines { display: none; }';\n  document.head.appendChild(styleSheet);\n}\n\n/**\n * Replace the section#main node with the article content\n */\n\nconst SECTION_MAIN_SELECTOR = 'section#main';\nconst ARTICLE_SELECTOR = '.pb-f-article-article-body > .row > .col-xs-12 > .ab-article-body > .ab-article-content > article';\n\n// Replaces section#main with article\nfunction hoistArticle() {\n  // Hoist article\n  const sectionMain = document.querySelector(SECTION_MAIN_SELECTOR);\n  const article = document.querySelector(ARTICLE_SELECTOR);\n  sectionMain.parentNode.replaceChild(article, sectionMain);\n\n  // Links and meta tags are SSR'd into this first paragraph,\n  // and it takes up unwanted space thanks to Arc's CSS\n  const suspectParagraph = article.firstElementChild;\n  if ([ ...suspectParagraph.children ].some(el => [ 'META', 'LINK' ].includes(el.tagName))) {\n    // If the paragraph includes <meta> or <link> tags, it's probably our SSR'd <head>\n    suspectParagraph.style.margin = 0;\n  }\n}\n\n// Runs hoistArticle() and stops RAF when necessary elements exist.\n// Stops after 5 seconds of trying.\nlet start = null;\nfunction ready(timestamp) {\n  if (!start)\n    start = timestamp;\n  if (document.body && document.querySelector(SECTION_MAIN_SELECTOR)) {\n    hoistArticle();\n    return;\n  }\n  if (timestamp - start < 5000) {\n    // If the body element isn't found, run ready() again at the next frame\n    window.requestAnimationFrame(ready);\n  } else {\n    // After 5 seconds, stop requesting frames and just use window.onload\n    console.log(\n      'Gave up on hoisting article to' +\n      SECTION_MAIN_SELECTOR +\n      '. Using window.onload event.'\n    );\n    window.onload = hoistArticle;\n  }\n}\n\n// Initialize our ready() function.\nif (isOnSpectatorPage)\n  window.requestAnimationFrame(ready);\n","import enterView from 'enter-view';\nimport textBalancer from 'text-balancer';\nimport { USE_COVER_HED, USE_EYE_NAV } from '../config.json';\nimport './scripts/page';\n\n// Fade in navbar at scroll trigger\n\nconst navbar = document.getElementById('navbar');\n\nif (USE_COVER_HED || USE_EYE_NAV) {\n  enterView({\n    selector: USE_COVER_HED ? '.headline' : '.step-deck',\n    offset: USE_COVER_HED ? 1 : 0.957,\n    enter: () => {\n      navbar.classList.remove('only-logo');\n    },\n    exit: () => {\n      navbar.classList.remove('show-nav-links');\n      navbar.classList.add('only-logo');\n    },\n  });\n}\n\n// Mobile navbar hamburger trigger\n\nexport function hamburgerTrigger() {\n  navbar.classList.toggle('show-nav-links');\n}\n\n// Text balance headline, deck, and image captions\n\ntextBalancer.balanceText('.headline, .deck, .image-overlay .image-caption-text');\n"]}